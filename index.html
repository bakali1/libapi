<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Books API Test</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f7f7f7;
      padding: 20px;
    }

    h2 {
      color: #333;
    }

    form {
      background: #fff;
      padding: 15px;
      margin-bottom: 20px;
      border-radius: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      max-width: 500px;
    }

    input, select {
      width: 100%;
      padding: 10px;
      margin-top: 10px;
      margin-bottom: 15px;
      border: 1px solid #ccc;
      border-radius: 5px;
    }

    input[type="submit"] {
      background-color: #4CAF50;
      color: white;
      cursor: pointer;
      font-weight: bold;
    }

    input[type="submit"]:hover {
      background-color: #45a049;
    }

    .response {
      white-space: pre-wrap;
      background: #e0f7fa;
      padding: 10px;
      border-left: 4px solid #00796b;
      font-family: monospace;
    }
  </style>
</head>
<body>

  <h2>Add or Update Book</h2>
  <form id="form-save">
    <input type="hidden" name="req" value="save">
    <input type="text" name="id" placeholder="Book ID (leave empty to add)">
    <input type="text" name="book_title" placeholder="Title" required>
    <input type="text" name="author" placeholder="Author" required>
    <input type="number" name="year" placeholder="Year" required>
    <input type="number" name="number_of_books" placeholder="Number of Copies" required>
    <select name="level_of_privilege" required>
    <option value="">-- Select Privilege Level --</option>
    <option value="P">P - Première (Primary School)</option>
    <option value="C">C - Collège (Middle School)</option>
    <option value="L">L - Lycée (High School)</option>
    <option value="A">A - Admin</option>
    </select>
    <input type="submit" value="Save Book">
  </form>

  <h2>Get Book</h2>
  <form id="form-get">
    <input type="hidden" name="req" value="get">
    <input type="number" name="id" placeholder="Book ID" required>
    <input type="submit" value="Get Book">
  </form>

  <h2>Delete Book</h2>
  <form id="form-del">
    <input type="hidden" name="req" value="del">
    <input type="number" name="id" placeholder="Book ID" required>
    <input type="submit" value="Delete Book">
  </form>

  <h2>Response</h2>
  <div class="response" id="response">Waiting for request...</div>

  <script>
    const API_URL = "books-api.php"; // adjust path if needed
    const responseBox = document.getElementById("response");

    const handleSubmit = (formId) => {
      const form = document.getElementById(formId);
      form.onsubmit = async (e) => {
        e.preventDefault();
        const formData = new FormData(form);
        const data = new URLSearchParams(formData);

        const res = await fetch(API_URL, {
          method: "POST",
          body: data
        });

        const json = await res.json();
        responseBox.textContent = JSON.stringify(json, null, 2);
      };
    };

    handleSubmit("form-save");
    handleSubmit("form-get");
    handleSubmit("form-del");
  </script>

</body>
</html>
